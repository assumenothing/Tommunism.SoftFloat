#region Copyright
/*============================================================================

This is a C# port of the TestFloat library release 3e by Thomas Kaiser (2022).
The copyright from the original source code is listed below.

This C source file is part of TestFloat, Release 3e, a package of programs for
testing the correctness of floating-point arithmetic complying with the IEEE
Standard for Floating-Point, by John R. Hauser.

Copyright 2011, 2012, 2013, 2014, 2015, 2017 The Regents of the University of
California.  All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
    this list of conditions, and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions, and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

 3. Neither the name of the University nor the names of its contributors may
    be used to endorse or promote products derived from this software without
    specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS "AS IS", AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, ARE
DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

=============================================================================*/
#endregion

using Tommunism.RandomNumbers;

namespace Tommunism.SoftFloat.Tests;

/// <summary>
/// Container type for generating 128-bit floating-point test cases.
/// </summary>
internal static class TestCaseGeneratorFloat128
{
    #region Fields

    private const int NumQIn = 22;
    private const int NumQOut = 78;
    private const int NumP1 = 4;
    private const int NumP2 = 443;

    private const int NumQInP1 = NumQIn * NumP1;
    private const int NumQOutP1 = NumQOut * NumP1;

    private const int NumQInP2 = NumQIn * NumP2;
    private const int NumQOutP2 = NumQOut * NumP2;

    private static readonly ulong[] QIn = new ulong[NumQIn]
    {
        0x0000000000000000,    // positive, subnormal
        0x0001000000000000,    // positive, -16382
        0x3F8E000000000000,    // positive,   -113
        0x3FFD000000000000,    // positive,     -2
        0x3FFE000000000000,    // positive,     -1
        0x3FFF000000000000,    // positive,      0
        0x4000000000000000,    // positive,      1
        0x4001000000000000,    // positive,      2
        0x4070000000000000,    // positive,    113
        0x7FFE000000000000,    // positive,  16383
        0x7FFF000000000000,    // positive, infinity or NaN
        0x8000000000000000,    // negative, subnormal
        0x8001000000000000,    // negative, -16382
        0xBF8E000000000000,    // negative,   -113
        0xBFFD000000000000,    // negative,     -2
        0xBFFE000000000000,    // negative,     -1
        0xBFFF000000000000,    // negative,      0
        0xC000000000000000,    // negative,      1
        0xC001000000000000,    // negative,      2
        0xC070000000000000,    // negative,    113
        0xFFFE000000000000,    // negative,  16383
        0xFFFF000000000000     // negative, infinity or NaN
    };

    private static readonly ulong[] QOut = new ulong[NumQOut]
    {
        0x0000000000000000,    // positive, subnormal
        0x0001000000000000,    // positive, -16382
        0x0002000000000000,    // positive, -16381
        0x3BFE000000000000,    // positive,  -1025
        0x3BFF000000000000,    // positive,  -1024
        0x3C00000000000000,    // positive,  -1023
        0x3C01000000000000,    // positive,  -1022
        0x3F7E000000000000,    // positive,   -129
        0x3F7F000000000000,    // positive,   -128
        0x3F80000000000000,    // positive,   -127
        0x3F81000000000000,    // positive,   -126
        0x3F8E000000000000,    // positive,   -113
        0x3FFB000000000000,    // positive,     -4
        0x3FFC000000000000,    // positive,     -3
        0x3FFD000000000000,    // positive,     -2
        0x3FFE000000000000,    // positive,     -1
        0x3FFF000000000000,    // positive,      0
        0x4000000000000000,    // positive,      1
        0x4001000000000000,    // positive,      2
        0x4002000000000000,    // positive,      3
        0x4003000000000000,    // positive,      4
        0x401C000000000000,    // positive,     29
        0x401D000000000000,    // positive,     30
        0x401E000000000000,    // positive,     31
        0x401F000000000000,    // positive,     32
        0x403C000000000000,    // positive,     61
        0x403D000000000000,    // positive,     62
        0x403E000000000000,    // positive,     63
        0x403F000000000000,    // positive,     64
        0x4070000000000000,    // positive,    113
        0x407E000000000000,    // positive,    127
        0x407F000000000000,    // positive,    128
        0x4080000000000000,    // positive,    129
        0x43FE000000000000,    // positive,   1023
        0x43FF000000000000,    // positive,   1024
        0x4400000000000000,    // positive,   1025
        0x7FFD000000000000,    // positive,  16382
        0x7FFE000000000000,    // positive,  16383
        0x7FFF000000000000,    // positive, infinity or NaN
        0x8000000000000000,    // negative, subnormal
        0x8001000000000000,    // negative, -16382
        0x8002000000000000,    // negative, -16381
        0xBBFE000000000000,    // negative,  -1025
        0xBBFF000000000000,    // negative,  -1024
        0xBC00000000000000,    // negative,  -1023
        0xBC01000000000000,    // negative,  -1022
        0xBF7E000000000000,    // negative,   -129
        0xBF7F000000000000,    // negative,   -128
        0xBF80000000000000,    // negative,   -127
        0xBF81000000000000,    // negative,   -126
        0xBF8E000000000000,    // negative,   -113
        0xBFFB000000000000,    // negative,     -4
        0xBFFC000000000000,    // negative,     -3
        0xBFFD000000000000,    // negative,     -2
        0xBFFE000000000000,    // negative,     -1
        0xBFFF000000000000,    // negative,      0
        0xC000000000000000,    // negative,      1
        0xC001000000000000,    // negative,      2
        0xC002000000000000,    // negative,      3
        0xC003000000000000,    // negative,      4
        0xC01C000000000000,    // negative,     29
        0xC01D000000000000,    // negative,     30
        0xC01E000000000000,    // negative,     31
        0xC01F000000000000,    // negative,     32
        0xC03C000000000000,    // negative,     61
        0xC03D000000000000,    // negative,     62
        0xC03E000000000000,    // negative,     63
        0xC03F000000000000,    // negative,     64
        0xC070000000000000,    // negative,    113
        0xC07E000000000000,    // negative,    127
        0xC07F000000000000,    // negative,    128
        0xC080000000000000,    // negative,    129
        0xC3FE000000000000,    // negative,   1023
        0xC3FF000000000000,    // negative,   1024
        0xC400000000000000,    // negative,   1025
        0xFFFD000000000000,    // negative,  16382
        0xFFFE000000000000,    // negative,  16383
        0xFFFF000000000000     // negative, infinity or NaN
    };

    private static readonly UInt128[] P1 = new UInt128[NumP1]
    {
        new UInt128(0x0000000000000000, 0x0000000000000000),
        new UInt128(0x0000000000000000, 0x0000000000000001),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFE)
    };

    private static readonly UInt128[] P2 = new UInt128[NumP2]
    {
        new UInt128(0x0000000000000000, 0x0000000000000000),
        new UInt128(0x0000000000000000, 0x0000000000000001),
        new UInt128(0x0000000000000000, 0x0000000000000002),
        new UInt128(0x0000000000000000, 0x0000000000000004),
        new UInt128(0x0000000000000000, 0x0000000000000008),
        new UInt128(0x0000000000000000, 0x0000000000000010),
        new UInt128(0x0000000000000000, 0x0000000000000020),
        new UInt128(0x0000000000000000, 0x0000000000000040),
        new UInt128(0x0000000000000000, 0x0000000000000080),
        new UInt128(0x0000000000000000, 0x0000000000000100),
        new UInt128(0x0000000000000000, 0x0000000000000200),
        new UInt128(0x0000000000000000, 0x0000000000000400),
        new UInt128(0x0000000000000000, 0x0000000000000800),
        new UInt128(0x0000000000000000, 0x0000000000001000),
        new UInt128(0x0000000000000000, 0x0000000000002000),
        new UInt128(0x0000000000000000, 0x0000000000004000),
        new UInt128(0x0000000000000000, 0x0000000000008000),
        new UInt128(0x0000000000000000, 0x0000000000010000),
        new UInt128(0x0000000000000000, 0x0000000000020000),
        new UInt128(0x0000000000000000, 0x0000000000040000),
        new UInt128(0x0000000000000000, 0x0000000000080000),
        new UInt128(0x0000000000000000, 0x0000000000100000),
        new UInt128(0x0000000000000000, 0x0000000000200000),
        new UInt128(0x0000000000000000, 0x0000000000400000),
        new UInt128(0x0000000000000000, 0x0000000000800000),
        new UInt128(0x0000000000000000, 0x0000000001000000),
        new UInt128(0x0000000000000000, 0x0000000002000000),
        new UInt128(0x0000000000000000, 0x0000000004000000),
        new UInt128(0x0000000000000000, 0x0000000008000000),
        new UInt128(0x0000000000000000, 0x0000000010000000),
        new UInt128(0x0000000000000000, 0x0000000020000000),
        new UInt128(0x0000000000000000, 0x0000000040000000),
        new UInt128(0x0000000000000000, 0x0000000080000000),
        new UInt128(0x0000000000000000, 0x0000000100000000),
        new UInt128(0x0000000000000000, 0x0000000200000000),
        new UInt128(0x0000000000000000, 0x0000000400000000),
        new UInt128(0x0000000000000000, 0x0000000800000000),
        new UInt128(0x0000000000000000, 0x0000001000000000),
        new UInt128(0x0000000000000000, 0x0000002000000000),
        new UInt128(0x0000000000000000, 0x0000004000000000),
        new UInt128(0x0000000000000000, 0x0000008000000000),
        new UInt128(0x0000000000000000, 0x0000010000000000),
        new UInt128(0x0000000000000000, 0x0000020000000000),
        new UInt128(0x0000000000000000, 0x0000040000000000),
        new UInt128(0x0000000000000000, 0x0000080000000000),
        new UInt128(0x0000000000000000, 0x0000100000000000),
        new UInt128(0x0000000000000000, 0x0000200000000000),
        new UInt128(0x0000000000000000, 0x0000400000000000),
        new UInt128(0x0000000000000000, 0x0000800000000000),
        new UInt128(0x0000000000000000, 0x0001000000000000),
        new UInt128(0x0000000000000000, 0x0002000000000000),
        new UInt128(0x0000000000000000, 0x0004000000000000),
        new UInt128(0x0000000000000000, 0x0008000000000000),
        new UInt128(0x0000000000000000, 0x0010000000000000),
        new UInt128(0x0000000000000000, 0x0020000000000000),
        new UInt128(0x0000000000000000, 0x0040000000000000),
        new UInt128(0x0000000000000000, 0x0080000000000000),
        new UInt128(0x0000000000000000, 0x0100000000000000),
        new UInt128(0x0000000000000000, 0x0200000000000000),
        new UInt128(0x0000000000000000, 0x0400000000000000),
        new UInt128(0x0000000000000000, 0x0800000000000000),
        new UInt128(0x0000000000000000, 0x1000000000000000),
        new UInt128(0x0000000000000000, 0x2000000000000000),
        new UInt128(0x0000000000000000, 0x4000000000000000),
        new UInt128(0x0000000000000000, 0x8000000000000000),
        new UInt128(0x0000000000000001, 0x0000000000000000),
        new UInt128(0x0000000000000002, 0x0000000000000000),
        new UInt128(0x0000000000000004, 0x0000000000000000),
        new UInt128(0x0000000000000008, 0x0000000000000000),
        new UInt128(0x0000000000000010, 0x0000000000000000),
        new UInt128(0x0000000000000020, 0x0000000000000000),
        new UInt128(0x0000000000000040, 0x0000000000000000),
        new UInt128(0x0000000000000080, 0x0000000000000000),
        new UInt128(0x0000000000000100, 0x0000000000000000),
        new UInt128(0x0000000000000200, 0x0000000000000000),
        new UInt128(0x0000000000000400, 0x0000000000000000),
        new UInt128(0x0000000000000800, 0x0000000000000000),
        new UInt128(0x0000000000001000, 0x0000000000000000),
        new UInt128(0x0000000000002000, 0x0000000000000000),
        new UInt128(0x0000000000004000, 0x0000000000000000),
        new UInt128(0x0000000000008000, 0x0000000000000000),
        new UInt128(0x0000000000010000, 0x0000000000000000),
        new UInt128(0x0000000000020000, 0x0000000000000000),
        new UInt128(0x0000000000040000, 0x0000000000000000),
        new UInt128(0x0000000000080000, 0x0000000000000000),
        new UInt128(0x0000000000100000, 0x0000000000000000),
        new UInt128(0x0000000000200000, 0x0000000000000000),
        new UInt128(0x0000000000400000, 0x0000000000000000),
        new UInt128(0x0000000000800000, 0x0000000000000000),
        new UInt128(0x0000000001000000, 0x0000000000000000),
        new UInt128(0x0000000002000000, 0x0000000000000000),
        new UInt128(0x0000000004000000, 0x0000000000000000),
        new UInt128(0x0000000008000000, 0x0000000000000000),
        new UInt128(0x0000000010000000, 0x0000000000000000),
        new UInt128(0x0000000020000000, 0x0000000000000000),
        new UInt128(0x0000000040000000, 0x0000000000000000),
        new UInt128(0x0000000080000000, 0x0000000000000000),
        new UInt128(0x0000000100000000, 0x0000000000000000),
        new UInt128(0x0000000200000000, 0x0000000000000000),
        new UInt128(0x0000000400000000, 0x0000000000000000),
        new UInt128(0x0000000800000000, 0x0000000000000000),
        new UInt128(0x0000001000000000, 0x0000000000000000),
        new UInt128(0x0000002000000000, 0x0000000000000000),
        new UInt128(0x0000004000000000, 0x0000000000000000),
        new UInt128(0x0000008000000000, 0x0000000000000000),
        new UInt128(0x0000010000000000, 0x0000000000000000),
        new UInt128(0x0000020000000000, 0x0000000000000000),
        new UInt128(0x0000040000000000, 0x0000000000000000),
        new UInt128(0x0000080000000000, 0x0000000000000000),
        new UInt128(0x0000100000000000, 0x0000000000000000),
        new UInt128(0x0000200000000000, 0x0000000000000000),
        new UInt128(0x0000400000000000, 0x0000000000000000),
        new UInt128(0x0000800000000000, 0x0000000000000000),
        new UInt128(0x0000C00000000000, 0x0000000000000000),
        new UInt128(0x0000E00000000000, 0x0000000000000000),
        new UInt128(0x0000F00000000000, 0x0000000000000000),
        new UInt128(0x0000F80000000000, 0x0000000000000000),
        new UInt128(0x0000FC0000000000, 0x0000000000000000),
        new UInt128(0x0000FE0000000000, 0x0000000000000000),
        new UInt128(0x0000FF0000000000, 0x0000000000000000),
        new UInt128(0x0000FF8000000000, 0x0000000000000000),
        new UInt128(0x0000FFC000000000, 0x0000000000000000),
        new UInt128(0x0000FFE000000000, 0x0000000000000000),
        new UInt128(0x0000FFF000000000, 0x0000000000000000),
        new UInt128(0x0000FFF800000000, 0x0000000000000000),
        new UInt128(0x0000FFFC00000000, 0x0000000000000000),
        new UInt128(0x0000FFFE00000000, 0x0000000000000000),
        new UInt128(0x0000FFFF00000000, 0x0000000000000000),
        new UInt128(0x0000FFFF80000000, 0x0000000000000000),
        new UInt128(0x0000FFFFC0000000, 0x0000000000000000),
        new UInt128(0x0000FFFFE0000000, 0x0000000000000000),
        new UInt128(0x0000FFFFF0000000, 0x0000000000000000),
        new UInt128(0x0000FFFFF8000000, 0x0000000000000000),
        new UInt128(0x0000FFFFFC000000, 0x0000000000000000),
        new UInt128(0x0000FFFFFE000000, 0x0000000000000000),
        new UInt128(0x0000FFFFFF000000, 0x0000000000000000),
        new UInt128(0x0000FFFFFF800000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFC00000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFE00000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFF00000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFF80000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFC0000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFE0000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFF0000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFF8000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFC000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFE000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFF000, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFF800, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFC00, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFE00, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFF00, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFF80, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFC0, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFE0, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFF0, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFF8, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFFC, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFFE, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0x0000000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0x8000000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xC000000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xE000000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xF000000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xF800000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFC00000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFE00000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFF00000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFF80000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFC0000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFE0000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFF0000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFF8000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFC000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFE000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFF000000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFF800000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFC00000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFE00000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFF00000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFF80000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFC0000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFE0000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFF0000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFF8000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFC000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFE000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFF000000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFF800000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFC00000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFE00000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFF00000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFF80000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFC0000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFE0000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFF0000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFF8000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFC000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFE000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFF000000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFF800000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFC00000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFE00000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFF00000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFF80000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFC0000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFE0000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFF0000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFF8000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFC000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFE000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFF000),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFF800),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFC00),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFE00),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFF00),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFF80),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFC0),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFE0),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFF0),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFF8),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFC),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFE),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFD),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFB),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFF7),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFEF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFDF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFBF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFF7F),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFEFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFDFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFBFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFF7FF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFEFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFDFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFBFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFF7FFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFEFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFDFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFBFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFF7FFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFEFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFDFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFBFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFF7FFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFEFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFDFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFBFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFF7FFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFEFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFDFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFFBFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFF7FFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFEFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFDFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFFBFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFF7FFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFEFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFDFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFFBFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFF7FFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFEFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFDFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFFBFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFF7FFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFEFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFDFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFFBFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFF7FFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFEFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFDFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFFBFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFF7FFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFEFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFDFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFFBFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFF7FFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFEFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFDFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xFBFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xF7FFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xEFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xDFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0xBFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFF, 0x7FFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFD, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFFB, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFF7, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFEF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFDF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFFBF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFF7F, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFEFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFDFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFFBFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFF7FF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFEFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFDFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFFBFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFF7FFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFEFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFDFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFFBFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFF7FFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFEFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFDFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFFBFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFF7FFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFEFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFDFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFFBFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFF7FFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFEFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFDFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFFBFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFF7FFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFEFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFDFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFFBFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFF7FFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFEFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFDFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FFBFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FF7FFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FEFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FDFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000FBFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000F7FFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000EFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000DFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000BFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00007FFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00003FFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00001FFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000FFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000007FFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000003FFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000001FFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000FFFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000007FFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000003FFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000001FFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000FFFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000007FFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000003FFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000001FFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000FFFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000007FFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000003FFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000001FFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000FFFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000007FFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000003FFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000001FFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000FFFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000007FFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000003FFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000001FFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000000FFFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000007FFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000003FFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000001FFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000000FFFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000007FFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000003FFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000001FFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000FFF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000000007FF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000000003FF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000000001FF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x00000000000000FF, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000000007F, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000000003F, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000000001F, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x000000000000000F, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000007, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000003, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000001, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0xFFFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x7FFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x3FFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x1FFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0FFFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x07FFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x03FFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x01FFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x00FFFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x007FFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x003FFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x001FFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x000FFFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0007FFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0003FFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0001FFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0000FFFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x00007FFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x00003FFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x00001FFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x00000FFFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x000007FFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x000003FFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x000001FFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x000000FFFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0000007FFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0000003FFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0000001FFFFFFFFF),
        new UInt128(0x0000000000000000, 0x0000000FFFFFFFFF),
        new UInt128(0x0000000000000000, 0x00000007FFFFFFFF),
        new UInt128(0x0000000000000000, 0x00000003FFFFFFFF),
        new UInt128(0x0000000000000000, 0x00000001FFFFFFFF),
        new UInt128(0x0000000000000000, 0x00000000FFFFFFFF),
        new UInt128(0x0000000000000000, 0x000000007FFFFFFF),
        new UInt128(0x0000000000000000, 0x000000003FFFFFFF),
        new UInt128(0x0000000000000000, 0x000000001FFFFFFF),
        new UInt128(0x0000000000000000, 0x000000000FFFFFFF),
        new UInt128(0x0000000000000000, 0x0000000007FFFFFF),
        new UInt128(0x0000000000000000, 0x0000000003FFFFFF),
        new UInt128(0x0000000000000000, 0x0000000001FFFFFF),
        new UInt128(0x0000000000000000, 0x0000000000FFFFFF),
        new UInt128(0x0000000000000000, 0x00000000007FFFFF),
        new UInt128(0x0000000000000000, 0x00000000003FFFFF),
        new UInt128(0x0000000000000000, 0x00000000001FFFFF),
        new UInt128(0x0000000000000000, 0x00000000000FFFFF),
        new UInt128(0x0000000000000000, 0x000000000007FFFF),
        new UInt128(0x0000000000000000, 0x000000000003FFFF),
        new UInt128(0x0000000000000000, 0x000000000001FFFF),
        new UInt128(0x0000000000000000, 0x000000000000FFFF),
        new UInt128(0x0000000000000000, 0x0000000000007FFF),
        new UInt128(0x0000000000000000, 0x0000000000003FFF),
        new UInt128(0x0000000000000000, 0x0000000000001FFF),
        new UInt128(0x0000000000000000, 0x0000000000000FFF),
        new UInt128(0x0000000000000000, 0x00000000000007FF),
        new UInt128(0x0000000000000000, 0x00000000000003FF),
        new UInt128(0x0000000000000000, 0x00000000000001FF),
        new UInt128(0x0000000000000000, 0x00000000000000FF),
        new UInt128(0x0000000000000000, 0x000000000000007F),
        new UInt128(0x0000000000000000, 0x000000000000003F),
        new UInt128(0x0000000000000000, 0x000000000000001F),
        new UInt128(0x0000000000000000, 0x000000000000000F),
        new UInt128(0x0000000000000000, 0x0000000000000007),
        new UInt128(0x0000000000000000, 0x0000000000000003)
    };

    private const int NumQInfWeightMasks = 14;

    private static readonly ulong[] QInfWeightMasks = new ulong[NumQInfWeightMasks]
    {
        0xFFFF000000000000,
        0xFFFF000000000000,
        0xBFFF000000000000,
        0x9FFF000000000000,
        0x87FF000000000000,
        0x87FF000000000000,
        0x83FF000000000000,
        0x81FF000000000000,
        0x80FF000000000000,
        0x807F000000000000,
        0x803F000000000000,
        0x801F000000000000,
        0x800F000000000000,
        0x8007000000000000
    };

    private static readonly ulong[] QInfWeightOffsets = new ulong[NumQInfWeightMasks]
    {
        0x0000000000000000,
        0x0000000000000000,
        0x2000000000000000,
        0x3000000000000000,
        0x3800000000000000,
        0x3C00000000000000,
        0x3E00000000000000,
        0x3F00000000000000,
        0x3F80000000000000,
        0x3FC0000000000000,
        0x3FE0000000000000,
        0x3FF0000000000000,
        0x3FF8000000000000,
        0x3FFC000000000000
    };

    private static readonly UInt128 SignificandMask = new(0x0000FFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF);

    #endregion

    #region Methods

    public static TestCaseGenerator Create(int argumentCount, int level = 1) => argumentCount switch
    {
        1 => new Args1(level),
        2 => new Args2(level),
        3 => new Args3(level),
        _ => throw new NotImplementedException()
    };

    private static Float128 NextQInP1(int index)
    {
        Debug.Assert(index is >= 0 and < NumQInP1);

        // Convert the index into array permutation indexes.
        var (expNum, sigNum) = Math.DivRem(index, NumP1);
        Debug.Assert(sigNum is >= 0 and < NumP1);
        Debug.Assert(expNum is >= 0 and < NumQIn);

        return Float128.FromUIntBits(new UInt128(QIn[expNum], 0) | P1[sigNum]);
    }

    private static Float128 NextQOutP1(int index)
    {
        Debug.Assert(index is >= 0 and < NumQOutP1);

        // Convert the index into array permutation indexes.
        var (expNum, sigNum) = Math.DivRem(index, NumP1);
        Debug.Assert(sigNum is >= 0 and < NumP1);
        Debug.Assert(expNum is >= 0 and < NumQOut);

        return Float128.FromUIntBits(new UInt128(QOut[expNum], 0) | P1[sigNum]);
    }

    private static Float128 NextQInP2(int index)
    {
        Debug.Assert(index is >= 0 and < NumQInP2);

        // Convert the index into array permutation indexes.
        var (expNum, sigNum) = Math.DivRem(index, NumP2);
        Debug.Assert(sigNum is >= 0 and < NumP2);
        Debug.Assert(expNum is >= 0 and < NumQIn);

        return Float128.FromUIntBits(new UInt128(QIn[expNum], 0) | P2[sigNum]);
    }

    private static Float128 NextQOutP2(int index)
    {
        Debug.Assert(index is >= 0 and < NumQOutP2);

        // Convert the index into array permutation indexes.
        var (expNum, sigNum) = Math.DivRem(index, NumP2);
        Debug.Assert(sigNum is >= 0 and < NumP2);
        Debug.Assert(expNum is >= 0 and < NumQOut);

        return Float128.FromUIntBits(new UInt128(QOut[expNum], 0) | P2[sigNum]);
    }

    private static Float128 RandomQOutP3(ref ThreefryRandom rng) =>
        Float128.FromUIntBits(new UInt128(QOut[rng.NextInt32(NumQOut)], 0)
            | ((P2[rng.NextInt32(NumP2)] + P2[rng.NextInt32(NumP2)]) & SignificandMask));

    private static Float128 RandomQOutPInf(ref ThreefryRandom rng) =>
        Float128.FromUIntBits(new UInt128(QOut[rng.NextInt32(NumQOut)], 0) | (rng.NextUInt128() & SignificandMask));

    private static Float128 RandomQInfP3(ref ThreefryRandom rng)
    {
        int weightMaskNum = rng.NextInt32(NumQInfWeightMasks);
        return Float128.FromUIntBits(
            new UInt128(((rng.NextUInt32() << 48) & QInfWeightMasks[weightMaskNum]) + QInfWeightOffsets[weightMaskNum], 0)
            | ((P2[rng.NextInt32(NumP2)] + P2[rng.NextInt32(NumP2)]) & SignificandMask)
        );
    }

    private static Float128 RandomQInfPInf(ref ThreefryRandom rng)
    {
        int weightMaskNum = rng.NextInt32(NumQInfWeightMasks);
        return Float128.FromUIntBits(
            (rng.NextUInt64() & (QInfWeightMasks[weightMaskNum] | 0x0000FFFFFFFFFFFF)) + QInfWeightOffsets[weightMaskNum],
            rng.NextUInt64()
        );
    }

    private static Float128 Random(ref ThreefryRandom rng) => rng.NextInt32(8) switch
    {
        0 or 1 or 2 => RandomQOutP3(ref rng),
        3 => RandomQOutPInf(ref rng),
        4 or 5 or 6 => RandomQInfP3(ref rng),
        7 => RandomQInfPInf(ref rng),
        _ => throw new InvalidOperationException("Invalid switch case.")
    };

    #endregion

    #region Nested Types

    /// <summary>
    /// Generates single argument 128-bit floating-point test cases.
    /// </summary>
    public class Args1 : TestCaseGenerator
    {
        #region Constructors

        public Args1() { }

        public Args1(int level) : base(level) { }

        #endregion

        #region Properties

        public override int ArgumentCount => 1;

        #endregion

        #region Methods

        public override TestRunnerArguments GenerateTestCase(long index)
        {
            if (index < 0)
                throw new ArgumentOutOfRangeException(nameof(index));

            long subCase;
            long subCaseIndex;
            var rng = new ThreefryRandom(index, Program.ThreefrySeed4x64, stackalloc ulong[ThreefryRandom.ResultsSize]);

            Float128 f128_a;

            switch (Level)
            {
                case 1:
                {
                    (subCaseIndex, subCase) = Math.DivRem(index, 3);
                    switch ((int)subCase)
                    {
                        case 0:
                        case 1:
                        {
                            f128_a = Random(ref rng);
                            break;
                        }
                        case 2:
                        {
                            f128_a = NextQOutP1((int)(subCaseIndex % NumQOutP1));
                            break;
                        }
                        default:
                        {
                            throw new InvalidOperationException("Invalid switch case.");
                        }
                    }

                    break;
                }

                case 2:
                {
                    subCase = index & 1;
                    subCaseIndex = index >> 1;
                    switch ((int)subCase)
                    {
                        case 0:
                        {
                            f128_a = Random(ref rng);
                            break;
                        }
                        case 1:
                        {
                            f128_a = NextQOutP2((int)(subCaseIndex % NumQOutP2));
                            break;
                        }
                        default:
                        {
                            throw new InvalidOperationException("Invalid switch case.");
                        }
                    }

                    break;
                }

                default:
                {
                    throw new NotImplementedException("Test level not implemented.");
                }
            }

            return new TestRunnerArguments(f128_a);
        }

        protected override long CalculateTotalCases() => Level switch
        {
            1 => 3 * NumQOutP1,
            2 => 2 * NumQOutP2,
            _ => throw new NotImplementedException("Test level not implemented.")
        };

        #endregion
    }

    /// <summary>
    /// Generates double argument 128-bit floating-point test cases.
    /// </summary>
    public class Args2 : TestCaseGenerator
    {
        #region Constructors

        public Args2() { }

        public Args2(int level) : base(level) { }

        #endregion

        #region Properties

        public override int ArgumentCount => 2;

        #endregion

        #region Methods

        public override TestRunnerArguments GenerateTestCase(long index)
        {
            if (index < 0)
                throw new ArgumentOutOfRangeException(nameof(index));

            long subCase;
            long subCaseIndex;
            var rng = new ThreefryRandom(index, Program.ThreefrySeed4x64, stackalloc ulong[ThreefryRandom.ResultsSize]);

            long currentAIndex, currentBIndex;
            Float128 f128_a, f128_b;

            switch (Level)
            {
                case 1:
                {
                    (subCaseIndex, subCase) = Math.DivRem(index, 6);

                    // Calculate "currentA" and "currentB" indexes.
                    currentAIndex = subCaseIndex;
                    (currentBIndex, currentAIndex) = Math.DivRem(currentAIndex, NumQInP1);
                    currentBIndex %= NumQInP1;

                    switch ((int)subCase)
                    {
                        case 0:
                        case 2:
                        case 4:
                        {
                            f128_a = Random(ref rng);
                            f128_b = Random(ref rng);
                            break;
                        }
                        case 1:
                        {
                            f128_a = NextQInP1((int)currentAIndex);
                            f128_b = Random(ref rng);
                            break;
                        }
                        case 3:
                        {
                            f128_a = Random(ref rng);
                            f128_b = NextQInP1((int)currentBIndex);
                            break;
                        }
                        case 5:
                        {
                            f128_a = NextQInP1((int)currentAIndex);
                            f128_b = NextQInP1((int)currentBIndex);
                            break;
                        }
                        default:
                        {
                            throw new InvalidOperationException("Invalid switch case.");
                        }
                    }

                    break;
                }

                case 2:
                {
                    subCase = index & 1;
                    subCaseIndex = index >> 1;

                    // Calculate "currentA" and "currentB" indexes.
                    (currentBIndex, currentAIndex) = Math.DivRem(subCaseIndex, NumQInP2);
                    currentBIndex %= NumQInP2;

                    switch ((int)subCase)
                    {
                        case 0:
                        {
                            f128_a = Random(ref rng);
                            f128_b = Random(ref rng);
                            break;
                        }
                        case 1:
                        {
                            f128_a = NextQInP2((int)currentAIndex);
                            f128_b = NextQInP2((int)currentBIndex);
                            break;
                        }
                        default:
                        {
                            throw new InvalidOperationException("Invalid switch case.");
                        }
                    }

                    break;
                }

                default:
                {
                    throw new NotImplementedException("Test level not implemented.");
                }
            }

            return new TestRunnerArguments(f128_a, f128_b);
        }

        protected override long CalculateTotalCases() => Level switch
        {
            1 => 6 * NumQInP1 * NumQInP1,
            2 => 2 * NumQInP2 * NumQInP2,
            _ => throw new NotImplementedException("Test level not implemented.")
        };

        #endregion
    }

    /// <summary>
    /// Generates triple argument 128-bit floating-point test cases.
    /// </summary>
    public class Args3 : TestCaseGenerator
    {
        #region Constructors

        public Args3() { }

        public Args3(int level) : base(level) { }

        #endregion

        #region Properties

        public override int ArgumentCount => 3;

        #endregion

        #region Methods

        public override TestRunnerArguments GenerateTestCase(long index)
        {
            if (index < 0)
                throw new ArgumentOutOfRangeException(nameof(index));

            long subCase;
            long subCaseIndex;
            var rng = new ThreefryRandom(index, Program.ThreefrySeed4x64, stackalloc ulong[ThreefryRandom.ResultsSize]);

            long currentAIndex, currentBIndex, currentCIndex;
            Float128 f128_a, f128_b, f128_c;

            switch (Level)
            {
                case 1:
                {
                    (subCaseIndex, subCase) = Math.DivRem(index, 6);

                    // Calculate "currentA", "currentB", and "currentC" indexes.
                    currentAIndex = subCaseIndex;
                    (currentBIndex, currentAIndex) = Math.DivRem(currentAIndex, NumQInP1);
                    (currentCIndex, currentBIndex) = Math.DivRem(currentBIndex, NumQInP1);
                    currentCIndex %= NumQInP1;

                    switch ((int)subCase)
                    {
                        case 0:
                        {
                            f128_a = Random(ref rng);
                            f128_b = Random(ref rng);
                            f128_c = NextQInP1((int)currentCIndex);
                            break;
                        }
                        case 1:
                        {
                            f128_a = NextQInP1((int)currentAIndex);
                            f128_b = NextQInP1((int)currentBIndex);
                            f128_c = Random(ref rng);
                            break;
                        }
                        case 2:
                        case 7:
                        {
                            f128_a = Random(ref rng);
                            f128_b = Random(ref rng);
                            f128_c = Random(ref rng);
                            break;
                        }
                        case 3:
                        {
                            f128_a = Random(ref rng);
                            f128_b = NextQInP1((int)currentBIndex);
                            f128_c = NextQInP1((int)currentCIndex);
                            break;
                        }
                        case 4:
                        {
                            f128_a = NextQInP1((int)currentAIndex);
                            f128_b = Random(ref rng);
                            f128_c = Random(ref rng);
                            break;
                        }
                        case 5:
                        {
                            f128_a = Random(ref rng);
                            f128_b = NextQInP1((int)currentBIndex);
                            f128_c = Random(ref rng);
                            break;
                        }
                        case 6:
                        {
                            f128_a = NextQInP1((int)currentAIndex);
                            f128_b = Random(ref rng);
                            f128_c = NextQInP1((int)currentCIndex);
                            break;
                        }
                        case 8:
                        {
                            f128_a = NextQInP1((int)currentAIndex);
                            f128_b = NextQInP1((int)currentBIndex);
                            f128_c = NextQInP1((int)currentCIndex);
                            break;
                        }
                        default:
                        {
                            throw new InvalidOperationException("Invalid switch case.");
                        }
                    }

                    break;
                }

                case 2:
                {
                    subCase = index & 1;
                    subCaseIndex = index >> 1;

                    // Calculate "currentA" and "currentB" indexes.
                    currentAIndex = subCaseIndex;
                    (currentBIndex, currentAIndex) = Math.DivRem(currentAIndex, NumQInP2);
                    (currentCIndex, currentBIndex) = Math.DivRem(currentBIndex, NumQInP2);
                    currentCIndex %= NumQInP2;

                    switch ((int)subCase)
                    {
                        case 0:
                        {
                            f128_a = Random(ref rng);
                            f128_b = Random(ref rng);
                            f128_c = Random(ref rng);
                            break;
                        }
                        case 1:
                        {
                            f128_a = NextQInP2((int)currentAIndex);
                            f128_b = NextQInP2((int)currentBIndex);
                            f128_c = NextQInP2((int)currentCIndex);
                            break;
                        }
                        default:
                        {
                            throw new InvalidOperationException("Invalid switch case.");
                        }
                    }

                    break;
                }

                default:
                {
                    throw new NotImplementedException("Test level not implemented.");
                }
            }

            return new TestRunnerArguments(f128_a, f128_b, f128_c);
        }

        protected override long CalculateTotalCases() => Level switch
        {
            1 => 9 * NumQInP1 * NumQInP1 * NumQInP1,
            2 => 2L * NumQInP2 * NumQInP2 * NumQInP2, // larger than signed 32-bit
            _ => throw new NotImplementedException("Test level not implemented.")
        };

        #endregion
    }

    #endregion
}
